<html>
<head>
    <script>
        // Define a function that handles the form submission
        function uploadImage(event) {
            // Prevent the default form behavior
            event.preventDefault();
            var fileInput = document.getElementById("file");
            var titleInput = document.getElementById("title");
            var captionInput = document.getElementById("caption");
            var dateInput = document.getElementById("date");
            var tagsInput = document.getElementById("tags");
            var categoryInput = document.getElementById("category");
            var formData = new FormData();
            // Append the file, title, and description to the FormData object
            formData.append("file", fileInput.files[0]);
            formData.append("title", titleInput.value);
            formData.append("description", descriptionInput.value);
            formData.append("date", dateInput.value);
            formData.append("tags", tagsInput.value);
            formData.append("category", categoryInput.value);
            
            // Send a fetch POST request to the API endpoint with the FormData object
            fetch("/api/image", {
                method: "POST",
                body: formData
            })
                .then(function (response) {
                    // Handle the success response
                    if (response.ok) {
                        alert("Image uploaded successfully!");
                        return response.json();
                    } else {
                        throw new Error(response.statusText);
                    }
                })
                .then(function (data) {
                    // Log the data to the console
                    console.log(data);
                })
                .catch(function (error) {
                    // Handle the error response
                    alert("Image upload failed!");
                    console.error(error);
                });
        }
    </script>
</head>
<body>
    <h1>Image Upload Form</h1>
    <form id="upload-form" onsubmit="uploadImage()">
        <p>Select an image file:</p>
        <input type="file" id="file" name="file" accept="image/*" required>
        <p>Enter an image title:</p>
        <input type="text" id="title" name="title" required>
        <p>Select an image date:</p>
        <input type="date" id="date" name="date" required>
        <p>Enter image tags (seperated by commas):</p>
        <input type="text" id="tags" name="tags" required>
        <p>Select an image category:</p>
        <select id="category" name="category">
          <option value="GalleryPiece">Gallery Piece</option>
          <option value="Study">Study</option>
          <option value="MinorWork">Minor Work</option>
          <option value="PleinAir">Plein Air</option>
          <option value="WorkInProgress">Work In Progress</option>
        </select>
        <p>Enter an image caption:</p>
        <input type="text" id="caption" name="caption" required>
        <br><br>
        <input type="submit" value="Upload Image">
    </form>
</body>
</html>
